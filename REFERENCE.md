# 参考文档

## 一、代码质量检查清单

### 1.1 类型系统与架构

| 检查项               | 说明                                       | 评分标准                              |
| -------------------- | ------------------------------------------ | ------------------------------------- |
| TypeScript类型完整性 | 组件 Props、状态管理、函数返回值的类型定义 | 完整 10分 / 部分 5分 / 缺失 0分       |
| Any类型使用情况      | 统计 any 类型数量及合理性                  | 无 any 10分 / 少量合理 5分 / 大量 0分 |
| 公共类型定义         | 类型定义集中化管理程度                     | 集中管理 10分 / 部分 5分 / 分散 0分   |
| 接口契约             | 与后端 API 类型对齐度                      | 完全对齐 10分 / 部分 5分 / 不对齐 0分 |

### 1.2 组件设计与工程化

| 检查项        | 说明                        | 评分标准                              |
| ------------- | --------------------------- | ------------------------------------- |
| 单一职责原则  | 组件拆分合理性              | 合理 10分 / 部分合理 5分 / 混乱 0分   |
| AI代码识别    | AI 生成的组件设计模式一致性 | 一致 10分 / 部分 5分 / 不一致 0分     |
| 副作用封装    | 自定义 Hooks 的质量与复用性 | 优秀 10分 / 一般 5分 / 差 0分         |
| Hooks依赖数组 | 准确性与完整性              | 完整准确 10分 / 部分 5分 / 问题多 0分 |
| 组件边界定义  | 模块耦合度                  | 低耦合 10分 / 中等 5分 / 高耦合 0分   |

### 1.3 性能优化指标

| 检查项       | 说明                                        | 评分标准                            |
| ------------ | ------------------------------------------- | ----------------------------------- |
| 重渲染分析   | React.memo、useMemo、useCallback 使用合理性 | 合理 10分 / 部分 5分 / 不合理 0分   |
| 虚拟滚动     | 大列表中的应用情况                          | 已应用 10分 / 部分 5分 / 未应用 0分 |
| 代码分割策略 | React.lazy 与动态导入使用                   | 合理 10分 / 部分 5分 / 未使用 0分   |
| 资源优化     | 图片压缩、Bundle 大小分析                   | 优秀 10分 / 一般 5分 / 差 0分       |

### 1.4 样式工程化

| 检查项     | 说明           | 评分标准                            |
| ---------- | -------------- | ----------------------------------- |
| CSS模块化  | 样式作用域管理 | 完善 10分 / 部分 5分 / 全局污染 0分 |
| 设计系统   | 样式变量一致性 | 一致 10分 / 部分 5分 / 混乱 0分     |
| 响应式布局 | 实现质量       | 完善 10分 / 部分 5分 / 缺失 0分     |

### 1.5 安全与依赖管理

| 检查项         | 说明                  | 评分标准                                |
| -------------- | --------------------- | --------------------------------------- |
| XSS防护        | 输入验证与安全渲染    | 完善 10分 / 部分 5分 / 存在风险 0分     |
| 第三方依赖     | 安全版本检查          | 全部安全 10分 / 部分 5分 / 存在漏洞 0分 |
| AI代码安全扫描 | AI 代码的安全漏洞检测 | 无漏洞 10分 / 轻微 5分 / 严重 0分       |

---

## 二、AI 代码标记规范

### 2.1 代码注释标记

```javascript
// @ai-generated-start
// 生成时间: YYYY-MM-DD
// 生成工具: GitHub Copilot/Cursor/Qoder/其他
// 人工审核状态: [已审核/待审核]
// @ai-generated-end
```

### 2.2 Git 提交标记

```bash
# 标准格式
git commit -m "feat: 功能描述 [AI]"
git commit -m "fix: 修复描述 [AI]"
git commit -m "refactor: 重构描述 [AI]"

# 混合模式
git commit -m "feat: 功能描述 [AI-assisted]"
```

### 2.3 AI 代码质量门禁

| 门禁项   | 要求                         | 检测方式        |
| -------- | ---------------------------- | --------------- |
| 类型安全 | 必须通过 TypeScript 严格模式 | tsc --strict    |
| 性能要求 | 避免过度抽象与性能陷阱       | 人工审查        |
| 安全扫描 | 通过安全漏洞专项检测         | ESLint 安全规则 |

---

## 三、核心指标定义（KPIs）

| 指标名称     | 计算公式                                         | 目标值 | 说明                   |
| ------------ | ------------------------------------------------ | ------ | ---------------------- |
| 效率提升比   | (人工工时 - 实际工时) / 人工工时 × 100%          | > 30%  | 衡量 AI 辅助的效率提升 |
| 评估准确率   | 1 - \|预估 - 实际\| / 预估 × 100%                | > 80%  | 衡量工时预估的准确性   |
| AI代码占比   | AI代码行数 / 总代码行数 × 100%                   | 40-60% | AI 生成代码的比例      |
| AI代码合格率 | (AI代码行数 - AI代码Bug行数) / AI代码行数 × 100% | > 95%  | AI 代码的质量          |
| AI标记合规率 | 标记合规项目数 / 总项目数 × 100%                 | 100%   | 标记规范执行度         |

---

## 四、复杂度评估标准

### 4.1 低复杂度

- 简单 CRUD 操作
- 基础表单/表格
- 样式调整
- 静态页面展示

**典型效率提升**：50-70%

### 4.2 中复杂度

- 包含业务逻辑的组件
- 多表单联动
- 数据格式转换
- 简单状态管理
- API 对接

**典型效率提升**：30-50%

### 4.3 高复杂度

- 复杂业务流程
- 多模块协作
- 性能优化需求
- 第三方系统集成
- 复杂状态管理

**典型效率提升**：10-30%

---

## 五、效率提升参考值

| 任务类型      | 典型效率提升范围 | AI 适用度 |
| ------------- | ---------------- | --------- |
| CRUD 业务代码 | 50-70%           | 高        |
| 表单组件开发  | 40-60%           | 高        |
| 数据转换处理  | 50-70%           | 高        |
| 样式代码编写  | 30-50%           | 中        |
| 单元测试编写  | 40-60%           | 高        |
| API 接口对接  | 40-60%           | 高        |
| 复杂业务逻辑  | 10-30%           | 低        |
| 第三方库集成  | 10-20%           | 低        |
| 架构设计决策  | 0-10%            | 低        |

---

## 六、问题优先级定义

### P0 - 紧急处理（本周内）

- 安全漏洞
- 严重性能问题
- 阻塞性 Bug
- 类型安全严重缺失

### P1 - 短期优化（本月完成）

- any 类型过多
- 组件设计不合理
- 代码质量评分 < 70
- AI 代码标记不合规

### P2 - 中期目标（本季度）

- TypeScript 覆盖率提升
- 性能优化
- 代码审查通过率提升
- 团队整体效率提升

---

## 七、质量评分计算

### 总分构成（100分）

| 维度             | 权重 | 满分 |
| ---------------- | ---- | ---- |
| 类型系统与架构   | 25%  | 25   |
| 组件设计与工程化 | 25%  | 25   |
| 性能优化         | 20%  | 20   |
| 样式工程化       | 15%  | 15   |
| 安全与依赖       | 15%  | 15   |

### 等级划分

| 等级 | 分数范围 | 说明                 |
| ---- | -------- | -------------------- |
| A    | 90-100   | 优秀，可作为最佳实践 |
| B    | 80-89    | 良好，小幅改进       |
| C    | 70-79    | 及格，需要改进       |
| D    | 60-69    | 较差，需要重点关注   |
| F    | < 60     | 不及格，需要立即整改 |
